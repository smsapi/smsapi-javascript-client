"use strict";function t(t){return t&&"object"==typeof t&&"default"in t?t.default:t}Object.defineProperty(exports,"__esModule",{value:!0});var e=t(require("axios")),r=t(require("axios/lib/adapters/http")),n=require("querystring"),s=t(require("lodash/mapKeys")),i=t(require("lodash/mapValues")),o=t(require("lodash/isArray")),a=t(require("lodash/snakeCase")),u=t(require("fs")),c=t(require("form-data")),h=t(require("lodash/camelCase")),m=t(require("lodash/forEach")),p=t(require("lodash/isObject"));function l(){return(l=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t}).apply(this,arguments)}function f(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}var d=function(t){this.httpClient=t},v=function(t){function e(e){var r;return(r=t.call(this,e)||this).httpClient.interceptors.request.use((function(t){var e=t.data,u=t.method,c=t.params;if("get"===(null==u?void 0:u.toLowerCase())){var h=i(c,(function(t,e){return"birthdayDate"===e?o(t)?t.map(r.formatDate):r.formatDate(t):t}));return l({},t,{params:h=s(h,(function(t,e){return a(e)})),paramsSerializer:function(t){return n.stringify(t)}})}return e?l({},t,{data:n.stringify(e)}):t})),r}f(e,t);var r=e.prototype;return r.get=function(t){try{return Promise.resolve(this.httpClient.get("/contacts",{params:t}))}catch(t){return Promise.reject(t)}},r.create=function(t,e){try{return Promise.resolve(this.httpClient.post("/contacts",l({phone_number:t},this.formatContactDetails(e||{}))))}catch(t){return Promise.reject(t)}},r.remove=function(t){try{return Promise.resolve(this.httpClient.delete("/contacts/"+t)).then((function(){}))}catch(t){return Promise.reject(t)}},r.formatDate=function(t){return t.toISOString().slice(0,10)},r.formatContactDetails=function(t){var e=t;return t.birthdayDate&&(e.birthdayDate=this.formatDate(t.birthdayDate)),s(e,(function(t,e){return a(e)}))},e}(d),P=function(t){function e(){return t.apply(this,arguments)||this}return f(e,t),e.prototype.check=function(t,e){try{return Promise.resolve(this.httpClient.get("/hlr.do",{params:{format:"json",idx:e,number:t.join(",")}}))}catch(t){return Promise.reject(t)}},e}(d),y=function(t){function e(e){var r;return(r=t.call(this,e)||this).httpClient.interceptors.request.use((function(t){return l({},t,{params:i(t.params,(function(t){return"boolean"!=typeof t?t:+t}))})})),r}f(e,t);var r=e.prototype;return r.send=function(t,e,r,n){try{var s=this,i=new c,a=void 0,h=l({details:!0,encoding:"utf-8",format:"json"},s.formatSmsDetails(n||{}));if(e?h.to=o(e)?e.join(","):e:h.group=o(r)?r.join(","):r,s.isSms(t)&&(h.message=t.message.trim()),s.isMms(t)&&(h.subject=t.subject.trim(),h.smil=t.smil),s.isVmsText(t)&&(h.tts=t.tts.trim(),h.tts_lector=t.ttsLector||"ewa"),s.isVmsRemotePath(t)&&(h.file=t.remotePath),s.isVmsLocalFile(t)){var m=u.createReadStream(t.localPath);i.append("file",m),a=i.getHeaders()}return Promise.resolve(s.httpClient.request({data:i,headers:a,method:"post",params:h,url:s.endpoint})).then((function(t){return s.formatSmsResponse(t)}))}catch(t){return Promise.reject(t)}},r.isSms=function(t){return void 0!==t.message},r.isMms=function(t){return void 0!==t.smil&&void 0!==t.subject},r.isVmsText=function(t){return void 0!==t.tts},r.isVmsLocalFile=function(t){return void 0!==t.localPath},r.isVmsRemotePath=function(t){return void 0!==t.remotePath},r.formatSmsDetails=function(t){var e=t;return t.date&&(e.dateValidate=!0,e.date=t.date.toISOString()),t.expirationDate&&(e.expirationDate=t.expirationDate.toISOString()),s(e,(function(t,e){return/param[1-4]/.test(e)?e:"noUnicode"===e?e.toLowerCase():a(e)}))},r.formatSmsResponse=function(t){return l({},t,{list:t.list.map((function(t){return l({},t,{dateSent:new Date(t.dateSent),points:"string"==typeof t.points?parseFloat(t.points):t.points})}))})},e}(d),j=function(t){function e(){var e;return(e=t.apply(this,arguments)||this).endpoint="/mms.do",e}f(e,t);var r=e.prototype;return r.sendMms=function(t,e,r,n){try{return Promise.resolve(this.send({smil:r,subject:e},t,void 0,n))}catch(t){return Promise.reject(t)}},r.sendMmsToGroup=function(t,e,r,n){try{return Promise.resolve(this.send({smil:r,subject:e},void 0,t,n))}catch(t){return Promise.reject(t)}},e}(y),C=function(t){function e(){return t.apply(this,arguments)||this}return f(e,t),e.prototype.get=function(){try{return Promise.resolve(this.httpClient.get("/profile"))}catch(t){return Promise.reject(t)}},e}(d),g=function(t){function e(){return t.apply(this,arguments)||this}f(e,t);var r=e.prototype;return r.get=function(){try{var t=this;return Promise.resolve(t.httpClient.get("/sms/sendernames")).then((function(e){return l({},e,{collection:e.collection.map(t.formatSendernameDates)})}))}catch(t){return Promise.reject(t)}},r.getBySender=function(t){try{var e=this;return Promise.resolve(e.httpClient.get("/sms/sendernames/"+t)).then((function(t){return e.formatSendernameDates(t)}))}catch(t){return Promise.reject(t)}},r.create=function(t){try{var e=this;return Promise.resolve(e.httpClient.post("/sms/sendernames",{sender:t})).then((function(t){return e.formatSendernameDates(t)}))}catch(t){return Promise.reject(t)}},r.makeDefault=function(t){try{return Promise.resolve(this.httpClient.post("/sms/sendernames/"+t+"/commands/make_default")).then((function(){}))}catch(t){return Promise.reject(t)}},r.remove=function(t){try{return Promise.resolve(this.httpClient.delete("/sms/sendernames/"+t)).then((function(){}))}catch(t){return Promise.reject(t)}},r.formatSendernameDates=function(t){return l({},t,{createdAt:new Date(t.createdAt)})},e}(d),S=function(t){function e(){var e;return(e=t.apply(this,arguments)||this).endpoint="/sms.do",e}f(e,t);var r=e.prototype;return r.sendSms=function(t,e,r){try{return Promise.resolve(this.send({message:e},t,void 0,r))}catch(t){return Promise.reject(t)}},r.sendFlashSms=function(t,e,r){try{return Promise.resolve(this.sendSms(t,e,l({},r,{flash:!0})))}catch(t){return Promise.reject(t)}},r.sendSmsToGroup=function(t,e,r){try{return Promise.resolve(this.send({message:e},void 0,t,r))}catch(t){return Promise.reject(t)}},r.sendFlashSmsToGroup=function(t,e,r){try{return Promise.resolve(this.sendSmsToGroup(t,e,l({},r,{flash:!0})))}catch(t){return Promise.reject(t)}},r.removeScheduledSms=function(t){try{var e=o(t)?t.join(","):t;return Promise.resolve(this.httpClient.post(this.endpoint,{format:"json",sch_del:e}))}catch(t){return Promise.reject(t)}},e}(y),b=function(t){function e(){return t.apply(this,arguments)||this}f(e,t);var r=e.prototype;return r.get=function(){try{return Promise.resolve(this.httpClient.get("/subusers"))}catch(t){return Promise.reject(t)}},r.getById=function(t){try{return Promise.resolve(this.httpClient.get("/subusers/"+t))}catch(t){return Promise.reject(t)}},r.create=function(t){try{var e=t.credentials,r=t.points;return Promise.resolve(this.httpClient.post("/subusers",l({},t,{credentials:{api_password:e.apiPassword,password:e.password,username:e.username},points:r?{from_account:r.fromAccount,per_month:r.perMonth}:void 0})))}catch(t){return Promise.reject(t)}},r.update=function(t,e){try{var r=e.credentials,n=e.points;return Promise.resolve(this.httpClient.put("/subusers/"+t,l({},e,{credentials:r&&(r.password||r.apiPassword)?{api_password:r.apiPassword,password:r.password}:void 0,points:n&&(n.fromAccount||n.perMonth)?{from_account:n.fromAccount,per_month:n.perMonth}:void 0})))}catch(t){return Promise.reject(t)}},r.remove=function(t){try{return Promise.resolve(this.httpClient.delete("/subusers/"+t)).then((function(){}))}catch(t){return Promise.reject(t)}},e}(d),w=function(t){function e(){return t.apply(this,arguments)||this}f(e,t);var r=e.prototype;return r.get=function(){try{return Promise.resolve(this.httpClient.get("/sms/templates"))}catch(t){return Promise.reject(t)}},r.getById=function(t){try{return Promise.resolve(this.httpClient.get("/sms/templates/"+t))}catch(t){return Promise.reject(t)}},r.create=function(t){try{return Promise.resolve(this.httpClient.post("/sms/templates",t))}catch(t){return Promise.reject(t)}},r.update=function(t,e){try{return Promise.resolve(this.httpClient.put("/sms/templates/"+t,e))}catch(t){return Promise.reject(t)}},r.remove=function(t){try{return Promise.resolve(this.httpClient.delete("/sms/templates/"+t)).then((function(){}))}catch(t){return Promise.reject(t)}},e}(d),D=function(t){function e(){var e;return(e=t.apply(this,arguments)||this).endpoint="/vms.do",e}f(e,t);var r=e.prototype;return r.sendVms=function(t,e,r,n){try{return Promise.resolve(this.send({tts:e,ttsLector:r},t,void 0,n))}catch(t){return Promise.reject(t)}},r.sendVmsWithLocalFile=function(t,e,r){try{return Promise.resolve(this.send({localPath:e},t,void 0,r))}catch(t){return Promise.reject(t)}},r.sendVmsWithRemoteFile=function(t,e,r){try{return Promise.resolve(this.send({remotePath:e},t,void 0,r))}catch(t){return Promise.reject(t)}},r.sendVmsToGroup=function(t,e,r,n){try{return Promise.resolve(this.send({tts:e,ttsLector:r},void 0,t,n))}catch(t){return Promise.reject(t)}},r.sendVmsWithLocalFileToGroup=function(t,e,r){try{return Promise.resolve(this.send({localPath:e},void 0,t,r))}catch(t){return Promise.reject(t)}},r.sendVmsWithRemoteFileToGroup=function(t,e,r){try{return Promise.resolve(this.send({remotePath:e},void 0,t,r))}catch(t){return Promise.reject(t)}},e}(y),_=function(t){return s(t,(function(t,e){return h(e)}))},q=function(t){var e=_(t);return m(e,(function(t,r){p(t)&&(e[r]=_(t))})),e},A=function(t){var e=t.data;return e?o(e)?e.map(q):function(t){return!!t.collection&&!!t.size}(e)?l({},e,{collection:e.collection.map(q)}):function(t){return!!t.list&&!!t.count}(e)?l({},e,{list:e.list.map(q)}):q(e):e},V=function(){function t(t,e){this.accessToken=t,this.apiUrl=e,this.httpClient=this.setHttpClient(),this.contacts=new v(this.httpClient),this.hlr=new P(this.httpClient),this.mms=new j(this.httpClient),this.profile=new C(this.httpClient),this.sendernames=new g(this.httpClient),this.sms=new S(this.httpClient),this.subusers=new b(this.httpClient),this.templates=new w(this.httpClient),this.vms=new D(this.httpClient)}var n=t.prototype;return n.getUserAgent=function(){return"smsapi/js-client:2.0.0"},n.setHttpClient=function(){var t=e.create({adapter:r,baseURL:this.apiUrl,headers:{Accept:"application/json",Authorization:"Bearer "+this.accessToken,"User-Agent":this.getUserAgent()}});return t.interceptors.response.use(A),t},t}(),x=function(t){function e(e){return t.call(this,e,"https://api.smsapi.com")||this}return f(e,t),e}(V),M=function(t){function e(e){return t.call(this,e,"https://api.smsapi.pl")||this}return f(e,t),e}(V);exports.SMSAPI={__proto__:null},exports.SMSAPIcom=x,exports.SMSAPIpl=M;
//# sourceMappingURL=smsapi-javascript-client.cjs.production.min.js.map
